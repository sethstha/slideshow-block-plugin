{"version":3,"file":"view.js","mappings":"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","sources":["webpack://sethstha-slideshow/./src/view.js"],"sourcesContent":["// fetches posts\nasync function getPosts() {\n\tconst response = await fetch('https://wptavern.com/wp-json/wp/v2/posts');\n\tconst post = await response.json();\n\treturn post;\n}\n\n// fetches featured image\nasync function getFeaturedImage(id) {\n\tconst response = await fetch(\n\t\t`https://wptavern.com/wp-json/wp/v2/media/${id}`\n\t);\n\tconst image = await response.json();\n\treturn image.source_url;\n}\n\n// Fetches posts and feauted image and returns an array\nasync function fetchPosts() {\n\tconst posts = await getPosts();\n\tconst filteredPosts = await Promise.all(\n\t\tposts.map(async (post) => {\n\t\t\treturn {\n\t\t\t\tid: post.id,\n\t\t\t\ttitle: post.title.rendered,\n\t\t\t\tdescription: post.excerpt.rendered,\n\t\t\t\t...(post.featured_image !== 0 && {\n\t\t\t\t\tfeaturedImage: await getFeaturedImage(post.featured_media),\n\t\t\t\t}),\n\t\t\t};\n\t\t})\n\t);\n\n\treturn filteredPosts;\n}\n\n// Generates HTML markup for slide\nfunction generateSlidesHTML(slide) {\n\ttry {\n\t\tconst container = document.getElementById('sethstha-slides');\n\t\tconst featuredImage = slide.featuredImage\n\t\t\t? `<img src=\"${slide.featuredImage}\" />`\n\t\t\t: null;\n\t\tcontainer.innerHTML += `<div class=\"sethstha-slide ${featuredImage ? 'has-thumbnail' : ''}\">\n\t\t<figure>\n\t\t\t${featuredImage}\n\t\t\t<figcaption>\n\t\t\t<a>${slide.title}</a>\n\t\t\t${slide.description}\n\t\t\t</figcaption>\n\t\t</figure>\n\t</div>`;\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}\n\nfunction generatePaginationHTML(number) {\n\ttry {\n\t\tconst container = document.getElementById('sethstha-pagination');\n\t\tcontainer.innerHTML = ''; //Clear the div first\n\t\tfor (let i = 0; i < number; i++) {\n\t\t\tcontainer.innerHTML += `<button type=\"button\" class=\"sethstha-pagination-indicator\" aria-label=\"Navigate to slide ${i}\" aria-selected=\"false\"></button>`;\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}\n\n// Actual logic of rendering slides\nfunction renderSlides() {\n\ttry {\n\t\tconst container = document.getElementById('sethstha-slides');\n\t\tconst slides = localStorage.getItem('sethstha-slides');\n\n\t\t// When there is data saved to localstorage\n\t\tif (slides && slides.length) {\n\t\t\tconst parsedSlides = JSON.parse(slides);\n\t\t\tparsedSlides.map((slide) => generateSlidesHTML(slide));\n\t\t\tgeneratePaginationHTML(parsedSlides.length);\n\n\t\t\t/* Check whether local storage data is upto date or not\n\t\t\t * If not replace it with newer data\n\t\t\t */\n\t\t\tfetchPosts().then((comparingSlides) => {\n\t\t\t\tif (comparingSlides !== slides) {\n\t\t\t\t\tcontainer.innerHTML = ''; //Empty out the container\n\t\t\t\t\tcomparingSlides.map((slide) => generateSlidesHTML(slide));\n\t\t\t\t\tgeneratePaginationHTML(comparingSlides.length);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t// When there is no data on local storage\n\t\t\tfetchPosts().then((newSlides) => {\n\t\t\t\tcontainer.innerHTML = ''; //Empty out the container\n\t\t\t\tnewSlides.map((slide) => generateSlidesHTML(slide));\n\t\t\t\tgeneratePaginationHTML(newSlides.length);\n\t\t\t\tlocalStorage.setItem('sethstha-slides', JSON.stringify(newSlides));\n\t\t\t});\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}\nrenderSlides();\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\tconst slides = document.getElementById('sethstha-slides');\n\tconst items = document.querySelectorAll('.sethstha-slide');\n\tconst prevButton = document.getElementById('sethstha-slider-prev');\n\tconst nextButton = document.getElementById('sethstha-slider-next');\n\n\tlet activeIndex = 0,\n\t\tcurrentTransform = -activeIndex * 100,\n\t\ttouchStart = null,\n\t\ttouchEnd = null;\n\n\t// Updates current index;\n\tconst updateIndex = (index) => {\n\t\tactiveIndex = index;\n\t};\n\n\t// update current transform;\n\tconst updateTransform = () => {\n\t\tcurrentTransform = -activeIndex * 100;\n\t};\n\n\t// When prev button is clicked\n\tconst onPrevPress = () => {\n\t\tupdateIndex((activeIndex - 1 + items.length) % items.length);\n\t\tupdateTransform();\n\t\tslides.style.transform = `translateX(${currentTransform}%)`;\n\t};\n\n\t// When next button is clicked\n\tconst onNextPress = () => {\n\t\tupdateIndex((activeIndex + 1) % items.length);\n\t\tupdateTransform();\n\t\tslides.style.transform = `translateX(${currentTransform}%)`;\n\t};\n\n\tsetInterval(() => {\n\t\tonNextPress();\n\t}, 3000);\n\n\t// Watch for click on prev button\n\tprevButton.addEventListener('click', onPrevPress);\n\tnextButton.addEventListener('click', onNextPress);\n\n\t// Navigate slider using keyboard\n\tdocument.addEventListener('keydown', (event) => {\n\t\tif (event.key === 'ArrowRight') {\n\t\t\tonNextPress();\n\t\t} else if (event.key === 'ArrowLeft') {\n\t\t\tonPrevPress();\n\t\t}\n\t});\n\n\tslides.addEventListener('touchstart', (e) => {\n\t\tconsole.log('touch start');\n\t\ttouchEnd = null;\n\t\ttouchStart = e.targetTouches[0].clientX;\n\t});\n\n\tslides.addEventListener('touchmove', (e) => {\n\t\ttouchEnd = e.targetTouches[0].clientX;\n\t});\n\n\tslides.addEventListener('touchend', () => {\n\t\tif (!touchStart || !touchEnd) return;\n\t\tconst minSwipeDistance = 50;\n\n\t\tconst distance = touchStart - touchEnd;\n\n\t\tif (distance > minSwipeDistance) {\n\t\t\tonNextPress();\n\t\t} else if (distance < -minSwipeDistance) {\n\t\t\tonPrevPress();\n\t\t}\n\t});\n});\n"],"names":["getPosts","response","fetch","post","json","getFeaturedImage","id","image","source_url","fetchPosts","posts","filteredPosts","Promise","all","map","title","rendered","description","excerpt","featured_image","featuredImage","featured_media","generateSlidesHTML","slide","container","document","getElementById","innerHTML","error","console","generatePaginationHTML","number","i","renderSlides","slides","localStorage","getItem","length","parsedSlides","JSON","parse","then","comparingSlides","newSlides","setItem","stringify","addEventListener","items","querySelectorAll","prevButton","nextButton","activeIndex","currentTransform","touchStart","touchEnd","updateIndex","index","updateTransform","onPrevPress","style","transform","onNextPress","setInterval","event","key","e","log","targetTouches","clientX","minSwipeDistance","distance"],"sourceRoot":""}