(()=>{"use strict";var e,t={85:()=>{const e=window.wp.blocks,t=window.React,s=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,n=window.wp.element,i=(0,n.forwardRef)((function({icon:e,size:t=24,...s},a){return(0,n.cloneElement)(e,{width:t,height:t,...s,ref:a})})),o=window.wp.primitives,r=(0,t.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(o.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})),h=(0,t.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(o.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"}));function c({title:e,link:s,featuredImage:a,desc:l,date:i,attributes:o}){const[r,h]=(0,n.useState)(),{postUrl:c,showPostExcerpt:d}=o,u=new Date(i);return(0,n.useEffect)((()=>{(async()=>{if(0!==a){const e=await fetch(`https://${c}/wp-json/wp/v2/media/${a}`),t=await e.json();h(t)}})()}),[]),(0,t.createElement)("div",{className:"sethstha-slide "+(r?"has-thumbnail":"has-no-thumbnal")},(0,t.createElement)("figure",null,r?(0,t.createElement)("a",{href:s,target:"_blank"},(0,t.createElement)("img",{width:r.media_details.width,height:r.media_details.height,src:r.source_url,alt:e,srcSet:`${r.media_details.sizes.full.source_url} ${r.media_details.sizes.full.width}w, ${r.media_details.sizes.thumbnail.source_url} ${r.media_details.sizes.thumbnail.width}w`,sizes:`(max-width: ${r.media_details.width}px) 100vw, ${r.media_details.width}px`})):null),(0,t.createElement)("div",{className:"sethstha-slide-description"},(0,t.createElement)("div",null,e?(0,t.createElement)("a",{href:s,target:"_blank",className:"sethstha-slide-title"},e):null,i?(0,t.createElement)("div",{className:"sethstha-slide-date"},(0,t.createElement)("span",null,u.toLocaleDateString())):null,l&&d?(0,t.createElement)("div",{className:"sethstha-slide-excerpt",dangerouslySetInnerHTML:{__html:l}}):null)))}function d({attributes:e}){const{postUrl:s,showNav:a,showPag:l,autoSlide:o,delay:d}=e,[u,p]=(0,n.useState)([]),[m,w]=(0,n.useState)(0),[g,v]=(0,n.useState)(null),[E,b]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{const e=await fetch(`https://${s}/wp-json/wp/v2/posts`),t=await e.json();p(t)})()}),[s]);const f=(0,n.useCallback)((()=>{w((e=>(e-1+u.length)%u.length))}),[u.length]),_=(0,n.useCallback)((()=>{w((e=>(e+1)%u.length))}),[u.length]),y=100*-m;return(0,n.useEffect)((()=>{if(o&&d){const e=setInterval(_,d);return()=>clearInterval(e)}}),[o,d,_]),(0,t.createElement)("div",{className:"sethstha-slider-wrapper",onKeyDown:e=>{"ArrowRight"===e.key?_():"ArrowLeft"===e.key&&f()},"aria-description":"Post Slideshow",onTouchEnd:()=>{if(!g||!E)return;const e=g-E;e>50?_():e<-50&&f()},onTouchStart:e=>{b(null),v(e.targetTouches[0].clientX)},onTouchMove:e=>b(e.targetTouches[0].clientX)},(0,t.createElement)("div",{className:"sethstha-slider"},(0,t.createElement)("div",{className:"sethstha-slides",style:{transform:`translateX(${y}%)`}},u.map((s=>(0,t.createElement)(c,{key:s.id,link:s.link,title:s.title.rendered,featuredImage:s.featured_media,desc:s.excerpt.rendered,attributes:e,date:s.date}))))),l?(0,t.createElement)("div",{className:"sethstha-pagination"},u.map(((e,s)=>(0,t.createElement)("button",{type:"button",key:s,className:"sethstha-pagination-indicator "+(s===m?"active":""),onClick:()=>w(s),"aria-label":`Navigate to slide ${s+1}`,"aria-selected":s===m})))):null,a?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("button",{type:"button",className:"sethstha-slider-nav sethstha-slider-nav--prev",onClick:f,"aria-label":"Go to previous slide"},(0,t.createElement)(i,{icon:r})),(0,t.createElement)("button",{type:"button",className:"sethstha-slider-nav sethstha-slider-nav--next",onClick:_,"aria-label":"Go to next slide"},(0,t.createElement)(i,{icon:h}))):null)}window.wp.apiFetch;const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"sethstha/sethstha-slideshow","version":"0.1.0","title":"Sethstha Posts Slideshow ","category":"design","icon":"slides","description":"Shows slideshow of latest blog posts","example":{},"supports":{"html":false},"textdomain":"sethstha","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js","attributes":{"postUrl":{"type":"string","default":"wptavern.com"},"showNav":{"type":"boolean","default":true},"showPag":{"type":"boolean","default":true},"autoSlide":{"type":"boolean","default":true},"delay":{"type":"string","default":"3000"},"showPostExcerpt":{"type":"boolean","default":true}}}');(0,e.registerBlockType)(u.name,{...u,edit:function({attributes:e,setAttributes:i}){const{postUrl:o,showNav:r,showPag:h,autoSlide:c,delay:u,showPostExcerpt:p}=e,[m,w]=(0,n.useState)(o);return(0,t.createElement)("div",{...(0,a.useBlockProps)()},(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:(0,s.__)("Slideshow Options","sethstha")},(0,t.createElement)(l.__experimentalInputControl,{label:"Url for posts",help:(0,s.__)("Enter URL from where you want to fetch your posts example wptavern.com","sethstha"),value:o,onChange:e=>{w(e)},type:"url"}),(0,t.createElement)(l.BaseControl,null,(0,t.createElement)(l.Button,{variant:"primary",type:"button",onClick:()=>{i({postUrl:m})}},(0,s.__)("Fetch Posts","sethstha"))),(0,t.createElement)(l.ToggleControl,{label:(0,s.__)("Show Navigation","sethstha"),help:(0,s.__)("Enabling this will show arrow navigation to navigate slideslow","sethstha"),checked:r,onChange:e=>{i({showNav:e})}}),(0,t.createElement)(l.ToggleControl,{label:(0,s.__)("Show Pagination","sethstha"),help:(0,s.__)("Enabling this will show pagination on slideshow","sethstha"),checked:h,onChange:e=>{i({showPag:e})}}),(0,t.createElement)(l.ToggleControl,{label:(0,s.__)("Auto Slide","sethstha"),help:(0,s.__)("Enabling this will show auto slide your slideshow","sethstha"),checked:c,onChange:e=>{i({autoSlide:e})}}),c?(0,t.createElement)(l.__experimentalNumberControl,{label:"Delay",help:(0,s.__)("Delay (in Milliseconds) between each slides when auto slide is enabled","sethstha"),value:u,min:0,onChange:e=>{i({delay:e})}}):null),(0,t.createElement)(l.PanelBody,{title:(0,s.__)("Slideshow Posts Options","sethstha")},(0,t.createElement)(l.ToggleControl,{label:(0,s.__)("Show Post Excerpt","sethstha"),help:(0,s.__)("Enabling this will show post short description on slide","sethstha"),checked:p,onChange:e=>{i({showPostExcerpt:e})}}))),(0,t.createElement)(n.Suspense,{fallback:(0,t.createElement)(l.Spinner,null)},(0,t.createElement)(d,{attributes:e})))},save:function({attributes:e}){const s="sethstha-slider "+(e.showPostExcertp?"":"hide-excerpt");return(0,t.createElement)("div",{id:"sethstha-slider-wrapper",class:"sethstha-slider-wrapper","data-autoplay":e.autoSlide,"data-delay":e.delay,"data-showtitle":e.showPostTitle,"data-showexcerpt":e.showPostExcertp,"data-url":e.postUrl},(0,t.createElement)("div",{class:s},(0,t.createElement)("div",{id:"sethstha-slides",class:"sethstha-slides"},(0,t.createElement)("div",{class:"sethstha-loader"},(0,t.createElement)("span",{class:"sethstha-spinner"}))),e.showNav?(0,t.createElement)("div",{id:"sethstha-navigation"}):null,e.showPag?(0,t.createElement)("div",{id:"sethstha-pagination",class:"sethstha-pagination"}):null),(0,t.createElement)("div",{id:"sethstha-url-changer",class:"sethstha-url-changer"},(0,t.createElement)("p",{class:"sethstha-error-msg"},"Please input valid url like wptavern.com"),(0,t.createElement)("div",{class:"sethstha-input-group"},(0,t.createElement)("input",{id:"sethstha-url",type:"url",value:e.postUrl}),(0,t.createElement)("button",{id:"sethstha-url-btn",type:"button"},"Fetch Post From This Url"))))}})}},s={};function a(e){var l=s[e];if(void 0!==l)return l.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,s,l,n)=>{if(!s){var i=1/0;for(c=0;c<e.length;c++){for(var[s,l,n]=e[c],o=!0,r=0;r<s.length;r++)(!1&n||i>=n)&&Object.keys(a.O).every((e=>a.O[e](s[r])))?s.splice(r--,1):(o=!1,n<i&&(i=n));if(o){e.splice(c--,1);var h=l();void 0!==h&&(t=h)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,l,n]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var l,n,[i,o,r]=s,h=0;if(i.some((t=>0!==e[t]))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(r)var c=r(a)}for(t&&t(s);h<i.length;h++)n=i[h],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},s=globalThis.webpackChunksethstha_slideshow=globalThis.webpackChunksethstha_slideshow||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var l=a.O(void 0,[431],(()=>a(85)));l=a.O(l)})();